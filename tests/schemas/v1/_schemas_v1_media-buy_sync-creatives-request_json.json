{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/v1/media-buy/sync-creatives-request.json",
  "title": "Sync Creatives Request",
  "description": "Request parameters for syncing creative assets with upsert semantics - supports bulk operations, patch updates, and assignment management",
  "type": "object",
  "properties": {
    "adcp_version": {
      "type": "string",
      "description": "AdCP schema version for this request",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "default": "1.6.0"
    },
    "creatives": {
      "type": "array",
      "description": "Array of creative assets to sync (create or update)",
      "items": {
        "$ref": "/schemas/v1/core/creative-asset.json"
      },
      "maxItems": 100
    },
    "patch": {
      "type": "boolean",
      "default": false,
      "description": "When true, only provided fields are updated (partial update). When false, entire creative is replaced (full upsert)."
    },
    "assignments": {
      "type": "object",
      "description": "Optional bulk assignment of creatives to packages",
      "patternProperties": {
        "^[a-zA-Z0-9_-]+$": {
          "type": "array",
          "description": "Array of package IDs to assign this creative to",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    },
    "delete_missing": {
      "type": "boolean",
      "default": false,
      "description": "When true, creatives not included in this sync will be archived. Use with caution for full library replacement."
    },
    "dry_run": {
      "type": "boolean",
      "default": false,
      "description": "When true, preview changes without applying them. Returns what would be created/updated/deleted."
    },
    "validation_mode": {
      "type": "string",
      "enum": [
        "strict",
        "lenient"
      ],
      "default": "strict",
      "description": "Validation strictness. 'strict' fails entire sync on any validation error. 'lenient' processes valid creatives and reports errors."
    },
    "push_notification_config": {
      "$ref": "/schemas/v1/core/push-notification-config.json",
      "description": "Optional webhook configuration for async sync notifications. Publisher will send webhook when sync completes if operation takes longer than immediate response time (typically for large bulk operations or manual approval/HITL)."
    }
  },
  "required": [
    "creatives"
  ],
  "additionalProperties": false,
  "examples": [
    {
      "description": "Full sync with hosted video creative",
      "data": {
        "creatives": [
          {
            "creative_id": "hero_video_30s",
            "name": "Brand Hero Video 30s",
            "format_id": {
              "agent_url": "https://creative.adcontextprotocol.org",
              "id": "video_standard_30s"
            },
            "assets": {
              "video": {
                "asset_type": "video",
                "url": "https://cdn.example.com/hero-video.mp4",
                "width": 1920,
                "height": 1080,
                "duration_ms": 30000
              }
            },
            "tags": [
              "q1_2024",
              "video"
            ]
          }
        ],
        "assignments": {
          "hero_video_30s": [
            "pkg_ctv_001",
            "pkg_ctv_002"
          ]
        }
      }
    },
    {
      "description": "Generative creative with approval",
      "data": {
        "creatives": [
          {
            "creative_id": "holiday_hero",
            "name": "Holiday Campaign Hero",
            "format_id": {
              "agent_url": "https://publisher.com/.well-known/adcp/sales",
              "id": "premium_bespoke_display"
            },
            "assets": {
              "promoted_offerings": {
                "asset_type": "promoted_offerings",
                "url": "https://retailer.com",
                "colors": {
                  "primary": "#C41E3A",
                  "secondary": "#165B33"
                }
              },
              "generation_prompt": {
                "asset_type": "text",
                "content": "Create a warm, festive holiday campaign featuring winter products"
              }
            },
            "tags": [
              "holiday",
              "q4_2024"
            ]
          }
        ]
      }
    }
  ]
}
